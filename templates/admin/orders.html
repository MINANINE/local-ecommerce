<!DOCTYPE html>
<html>
<head>
    <title>订单管理</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial; }
        body { background: #f5f5f5; padding: 20px; }
        .admin-header { background: #28a745; color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .back-btn { background: white; color: #28a745; padding: 8px 15px; border-radius: 5px; text-decoration: none; }
        .orders-table { width: 100%; background: white; border-collapse: collapse; border-radius: 8px; overflow: hidden; }
        .orders-table th { background: #343a40; color: white; padding: 12px; text-align: left; }
        .orders-table td { padding: 10px; border-bottom: 1px solid #eee; }
        .status-form { display: inline-block; }
        .status-select { padding: 5px; border-radius: 3px; border: 1px solid #ddd; }
        .update-btn { padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .empty { text-align: center; padding: 50px; color: #666; }
    </style>
</head>
<body>
    <div class="admin-header">
        <h1>订单管理系统</h1>
        <a href="/admin" class="back-btn">← 返回商品管理</a>
    </div>
    
    {% if orders %}
    <table class="orders-table">
        <thead>
            <tr>
                <th>订单号</th>
                <th>用户</th>
                <th>商品</th>
                <th>数量</th>
                <th>总价</th>
                <th>下单时间</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>#{{ order[0] }}</td>
                <td>{{ order[9] }}</td>
                <td>{{ order[3] }}</td>
                <td>{{ order[5] }}</td>
                <td>¥{{ order[6] }}</td>
                <td>{{ order[8] }}</td>
                <td>{{ order[7] }}</td>
                <td>
                    <form action="/admin/update_order_status/{{ order[0] }}" method="POST" class="status-form">
                        <select name="status" class="status-select">
                            <option value="未发货" {% if order[7] == '未发货' %}selected{% endif %}>未发货</option>
                            <option value="已发货" {% if order[7] == '已发货' %}selected{% endif %}>已发货</option>
                            <option value="待收货" {% if order[7] == '待收货' %}selected{% endif %}>待收货</option>
                            <option value="已收货" {% if order[7] == '已收货' %}selected{% endif %}>已收货</option>
                        </select>
                        <button type="submit" class="update-btn">更新</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty">
        <h2>暂无订单</h2>
    </div>
    {% endif %}
</body>
</html>
